---
title: "extra bits"
author: "Saras Windecker"
date: "9 March 2017"
output: html_document
---

<<<<<<< HEAD
** Needs finishing when GBIF is working again to test **

### Loading your own data
If you have occurrence dataset from field surveys that you want to analyse, you can load it using the `LocalOccurrenceData` module. This requires a .csv file with three columns for the values of longitude, latitude, and value of species presence, in that order. For alternate coordinate systems refer to the information about a CRS column using `ModuleHelp("LocalOccurrenceData")`. 

To load your own presence-only dataset, set your `occurrence` module within `workflow()` as follows:

```{r eval=FALSE}
occurrence = LocalOccurrenceData(filename = "myData.csv",
                                 occurrenceType = 'presence')
```

To load your own presence-absence dataset, set your `occurrence` module within `workflow()` as follows:

```{r eval=FALSE}
occurrence = LocalOccurrenceData(filename = "myData.csv",
                                 occurrenceType = 'presence/absence')
```

**Add example here**

`zoon` has several fucntions available to view the contents of each module in your workflow. These are called accessor fcuntions. For exmaple, you can view your species occurrence data using the `Occurrence()` function:

```{r eval=FALSE, message=FALSE, warning=FALSE}
Occurrence(Your_Workflow_Name_Here)
```

The outputs of this accessor function are shown below for both the `CarolinaWrenPO` (top) and `CarolinaWrenPA` data modules (bottom). The first two columns provide the geographic location of the observation (as longitude and latitude), the third column is the observation value (1 = presence, 0 = absence), the fourth column is the type of observation, and the last column identifies the "fold" the data point is located in if utilising cross-validation (covered later in the section of `Process` modules, but a default model can be considered to always have one fold).

```{r eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE}
hidden_PO_workflow <- workflow(occurrence = CarolinaWrenPO,    ### just some basic workflows so there
                             covariate = CarolinaWrenRasters,  ### is something to run accessor functions
                             process = Background,          ### on as examples
                             model = MaxEnt,
                             output = NoOutput)

hidden_PA_workflow <- workflow(occurrence = CarolinaWrenPA,
                             covariate = CarolinaWrenRasters,
                             process = NoProcess,
                             model = LogisticRegression,
                             output = NoOutput)
```

```{r eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE}
head(Occurrence(hidden_PO_workflow))
```

```{r eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE}
tail(Occurrence(hidden_PA_workflow))
```

If we wanted to get a data frame that showed our combined presence points with their corresponding values of a covariate layer, we would use the `Process()` accessor function. 

```{r eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE}
test_workflow <- workflow(occurrence = CarolinaWrenPO,
                        covariate = CarolinaWrenRasters,  
                        process = Background, 
                        model = LogisticRegression, 
                        output = NoOutput)

```

```{r eval=TRUE, echo=TRUE, message=FALSE, warning=FALSE}
occ_and_cov_df <- Process(test_workflow)$df
```

```{r eval=TRUE, echo=FALSE, message=FALSE, warning=FALSE}
head(occ_and_cov_df)
```
